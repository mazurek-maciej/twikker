(this.webpackJsonptwikker=this.webpackJsonptwikker||[]).push([[0],{21:function(e,t,a){},30:function(e,t,a){},33:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){},41:function(e,t,a){},42:function(e,t,a){},43:function(e,t,a){"use strict";a.r(t);var s,n=a(1),r=a.n(n),c=a(23),o=a.n(c),i=(a(30),a(10)),l=a(3),u=a(9),d=a(5),j=a(11),b=a.n(j),h=a(2),O=a(15),p=["John","Mike","Clara","Anthony","Christina","Clerence","Darious","Benjamin","Angela","Michael"],f="https://jsonplaceholder.typicode.com/posts",m=function(){var e=Object(O.a)(b.a.mark((function e(){var t,a,s,n,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(f);case 2:if(!(t=e.sent).ok){e.next=12;break}return e.next=6,t.json();case 6:return a=e.sent,s=a.map((function(e){return Object(h.a)(Object(h.a)({},e),{},{userName:p[e.userId-1]})})),n={data:s,error:void 0},e.abrupt("return",n);case 12:return r={data:void 0,error:"Cannot fetch posts. Please try to refresh the page."},e.abrupt("return",r);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Object(O.a)(b.a.mark((function e(t){var a,s,n,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(f,"/").concat(t));case 2:if(!(a=e.sent).ok){e.next=12;break}return e.next=6,a.json();case 6:return(s=e.sent).userName=p[s.userId-1],n={data:[s],error:void 0},e.abrupt("return",n);case 12:return r={data:void 0,error:"Cannot fetch post with id: ".concat(t,". Please try to refresh the page")},e.abrupt("return",r);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function x(e){var t=Object(n.useState)(s.IDLE),a=Object(d.a)(t,2),r=a[0],c=a[1],o=Object(n.useState)({data:void 0,error:void 0}),i=Object(d.a)(o,2),l=i[0],u=i[1],j=function(){var t=Object(O.a)(b.a.mark((function t(){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c(s.FETCHING),t.next=3,e();case 3:(a=t.sent).data?(c(s.SUCCESS),u(a)):(c(s.FAILURE),u(a));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(n.useEffect)((function(){j()}),[]),{status:r,state:l}}!function(e){e.IDLE="IDLE",e.FETCHING="FETCHING",e.SUCCESS="SUCCESS",e.FAILURE="FAILURE"}(s||(s={}));var w={loginLength:new RegExp("^(?=.{5,})"),passwordLength:new RegExp("^(?=.{8,})"),passwordCapitalLetter:new RegExp("^(?=.*[A-Z])"),passwordSmallLetter:new RegExp("^(?=.*[a-z])"),passwordNumber:new RegExp("^(?=.*[0-9])")},v=a(0),N=r.a.createContext({isAuth:!1,login:function(e,t){},logout:function(){},errors:{login:null,password:[]}});function C(e){var t=e.children,a=Object(n.useState)(!1),s=Object(d.a)(a,2),r=s[0],c=s[1],o=Object(n.useState)({login:null,password:[]}),i=Object(d.a)(o,2),l=i[0],j=i[1];return Object(v.jsx)(N.Provider,{value:{isAuth:r,login:function(e,t){var a=function(e,t){var a={login:null,password:[]};return w.loginLength.test(e)||(a=Object(h.a)(Object(h.a)({},a),{},{login:"Login require at least 5 characters! Your login has ".concat(e.length)})),a=w.passwordSmallLetter.test(t)?Object(h.a)(Object(h.a)({},a),{},{password:Object(u.a)(a.password)}):Object(h.a)(Object(h.a)({},a),{},{password:[].concat(Object(u.a)(a.password),["Password require at least one small letter!"])}),a=w.passwordCapitalLetter.test(t)?Object(h.a)(Object(h.a)({},a),{},{password:Object(u.a)(a.password)}):Object(h.a)(Object(h.a)({},a),{},{password:[].concat(Object(u.a)(a.password),["Password require at least one capital letter!"])}),a=w.passwordNumber.test(t)?Object(h.a)(Object(h.a)({},a),{},{password:Object(u.a)(a.password)}):Object(h.a)(Object(h.a)({},a),{},{password:[].concat(Object(u.a)(a.password),["Password require at least one number!"])}),w.passwordLength.test(t)?Object(h.a)(Object(h.a)({},a),{},{password:Object(u.a)(a.password)}):Object(h.a)(Object(h.a)({},a),{},{password:[].concat(Object(u.a)(a.password),["Password require at least 8 characters! Your login has ".concat(t.length)])})}(e,t);!a.login&&a.password.length<1?(c(!0),window.sessionStorage.setItem("username",e),window.sessionStorage.setItem("password",t)):(c(!1),j(a))},logout:function(){c(!1),window.sessionStorage.removeItem("username"),window.sessionStorage.removeItem("password")},errors:l},children:t})}var S=function(){return r.a.useContext(N)};a(21);function _(e){var t=e.post,a=e.handleOnClick;return Object(v.jsxs)("div",{className:"wall-post",onClick:function(){return a(t.id)},children:[Object(v.jsxs)("h3",{className:"wall-post__user",children:[t.userName," ",Object(v.jsx)("span",{className:"wall-post__eyes",children:"\ud83d\udc40"})]}),Object(v.jsx)("h4",{className:"wall-post__title",children:t.title})]})}a(33);function k(e){var t=e.message,a=void 0===t?"\ud83d\udc40":t,s=e.isVisible,n=e.toggleVisibility;return s?Object(v.jsx)("div",{className:"modal ".concat(s?"is-active":""),children:Object(v.jsxs)("div",{className:"modal-box",children:[Object(v.jsx)("h3",{children:a}),Object(v.jsx)("button",{className:"modal-btn",onClick:n,children:"OK"})]})}):null}function E(){var e=Object(n.useState)([]),t=Object(d.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)([]),o=Object(d.a)(c,2),i=o[0],j=o[1],b=Object(n.useState)(!1),h=Object(d.a)(b,2),O=h[0],p=h[1],f=Object(n.useState)(!0),g=Object(d.a)(f,2),w=g[0],N=g[1],C=Object(n.useState)(0),E=Object(d.a)(C,2),I=E[0],y=E[1],L=x((function(){return m()})),F=L.status,A=L.state,P=null===A||void 0===A?void 0:A.data,D=S().logout,U=Object(l.g)().push,R=Object(n.useCallback)((function(e){return U("/post/".concat(e))}),[U]),T=function(){return N(!1)},G=Object(n.useCallback)((function(){return F===s.FETCHING?Object(v.jsx)("p",{children:"Loading..."}):F===s.FAILURE?Object(v.jsx)(k,{message:null===A||void 0===A?void 0:A.error,isVisible:w,toggleVisibility:T}):void 0}),[F,null===A||void 0===A?void 0:A.error,w]),V=Object(n.useCallback)((function(){return O&&i.length>0&&F===s.SUCCESS?i.map((function(e){return Object(v.jsx)(_,{post:e,handleOnClick:R},e.id)})):!O&&a&&F===s.SUCCESS?a.map((function(e){return Object(v.jsx)(_,{post:e,handleOnClick:R},e.id)})):null}),[i,R,O,a,F]);return Object(n.useEffect)((function(){var e;return P&&a.length!==(null===P||void 0===P?void 0:P.length)&&(e=setInterval((function(){r([].concat(Object(u.a)(a),[P[I]])),y(I+1)}),1e3)),function(){return clearInterval(e)}}),[I,A,a,P]),console.log(A),Object(v.jsxs)("div",{className:"wall",children:[Object(v.jsxs)("div",{className:"wall-header",children:[Object(v.jsx)("button",{className:"wall-header__btn",onClick:D,children:"logout"}),Object(v.jsxs)("div",{className:"wall-header__search",children:[Object(v.jsx)("label",{htmlFor:"search",className:"wall-header__search-label",children:"Search"}),Object(v.jsx)("input",{className:"wall-header__search-input",id:"search",type:"text",onChange:function(e){var t=e.target.value;0===t.length?p(!1):p(!0);var s=a.filter((function(e){return e.title.match(t)||e.body.match(t)}));j(s)}})]})]}),Object(v.jsxs)("div",{className:"wall-posts",children:[V(),G()]})]})}a(39);function I(){var e=Object(n.useState)(""),t=Object(d.a)(e,2),a=t[0],s=t[1],r=Object(n.useState)(""),c=Object(d.a)(r,2),o=c[0],i=c[1],u=S(),j=u.isAuth,b=u.login,h=u.errors,O=Object(n.useCallback)((function(){return h.login?Object(v.jsxs)("p",{className:"login-form-field__error","data-testid":"error",children:[h.login," \ud83d\ude48"]}):null}),[h.login]),p=Object(n.useCallback)((function(){return h.password?h.password.map((function(e){return Object(v.jsxs)("p",{"data-testid":"error",className:"login-form-field__error",children:[e," \ud83d\ude48"]},e)})):null}),[h.password]);if(j)return Object(v.jsx)(l.a,{to:"/"});return Object(v.jsxs)("div",{className:"login-container",children:[Object(v.jsx)("h1",{className:"login-title",children:"Twikker"}),Object(v.jsxs)("form",{className:"login-form",onSubmit:function(e){e.preventDefault(),b(a,o)},children:[Object(v.jsxs)("div",{className:"login-form-field",children:[Object(v.jsx)("label",{className:"login-form-field__label",htmlFor:"username",children:"Login"}),Object(v.jsx)("input",{className:"login-form-field__input",type:"text",id:"username","data-testid":"login",onChange:function(e){return s(e.target.value)}}),O()]}),Object(v.jsxs)("div",{className:"login-form-field",children:[Object(v.jsx)("label",{className:"login-form-field__label",htmlFor:"pass",children:"Password"}),Object(v.jsx)("input",{className:"login-form-field__input",type:"password",id:"pass","data-testid":"password",onChange:function(e){return i(e.target.value)}}),p()]}),Object(v.jsx)("button",{type:"submit",className:"login-form-submit",children:"Log in \ud83d\udc4d\ud83c\udffb"})]})]})}a(40);function y(){var e=Object(n.useState)(!0),t=Object(d.a)(e,2),a=t[0],r=t[1],c=Object(l.h)().pathname.match(/\/post\/(.*)/)[1],o=x((function(){return g(c)})),u=o.status,j=o.state,b=null===j||void 0===j?void 0:j.data;return u===s.FETCHING?Object(v.jsx)("div",{className:"post-details",children:Object(v.jsxs)("p",{className:"post-details__loading",children:["Loading data for post with ID ",c]})}):u===s.SUCCESS&&b?Object(v.jsxs)("div",{className:"post-details",children:[Object(v.jsxs)("div",{className:"post-details__header",children:[Object(v.jsx)(i.b,{className:"post-details__header-back",to:"/",children:"Go back"}),Object(v.jsx)("h1",{className:"post-details__header-h1",children:"Details"})]}),Object(v.jsx)("h2",{className:"post-details__username",children:b[0].userName}),Object(v.jsxs)("p",{children:["ID: ",b[0].userId]}),Object(v.jsx)("h3",{children:b[0].title}),Object(v.jsx)("p",{children:b[0].body})]}):Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(k,{message:null===j||void 0===j?void 0:j.error,isVisible:a,toggleVisibility:function(){return r(!1)}}),Object(v.jsxs)("h1",{children:["Post ID:",c," not found"]})]})}a(41);function L(){var e=Object(l.g)();return Object(v.jsxs)("div",{className:"not-found",children:[Object(v.jsx)("h3",{children:"You may not find here what you looking for"}),Object(v.jsx)("h2",{children:"Go back to main site and enjoy dose of your favourite posts \ud83d\udd25"}),Object(v.jsx)("button",{className:"not-found-btn",onClick:function(){return e.push("/")},children:"Back to main site"})]})}var F=a(25),A=["children"];function P(e){var t=e.children,a=Object(F.a)(e,A),s=S().isAuth;return Object(v.jsx)(l.b,Object(h.a)(Object(h.a)({},a),{},{render:function(){return s?t:Object(v.jsx)(l.a,{to:"/login"})}}))}a(42);var D=function(){return Object(v.jsx)("div",{className:"app",children:Object(v.jsx)(i.a,{basename:"/twikker",children:Object(v.jsxs)(l.d,{children:[Object(v.jsx)(l.b,{path:"/login",children:Object(v.jsx)(I,{})}),Object(v.jsx)(P,{exact:!0,path:"/",children:Object(v.jsx)(E,{})}),Object(v.jsx)(P,{path:"/post/:id",children:Object(v.jsx)(y,{})}),Object(v.jsx)(P,{path:"/*",children:Object(v.jsx)(L,{})})]})})})},U=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,44)).then((function(t){var a=t.getCLS,s=t.getFID,n=t.getFCP,r=t.getLCP,c=t.getTTFB;a(e),s(e),n(e),r(e),c(e)}))};o.a.render(Object(v.jsx)(r.a.StrictMode,{children:Object(v.jsx)(C,{children:Object(v.jsx)(D,{})})}),document.getElementById("root")),U()}},[[43,1,2]]]);
//# sourceMappingURL=main.91cd852b.chunk.js.map